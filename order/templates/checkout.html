{% extends 'base.html' %}
{% load i18n %}
{% load static %}
    
    {% block title %}<title>{% trans 'Sifariş' %} | STOREGLASSTECH</title>{% endblock %}
        
    {% block style %}<link rel="stylesheet" href="{% static 'css/checkout.css' %}">{% endblock %}


    {% block content %}

    <div class="w-100">
        <div class="container-fluid py-5">
            <div id="checkout_coupon">
                <div id="coupon-notice" class="notice-banner is-info" role="alert">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" aria-hidden="true"
                        focusable="false">
                        <path
                            d="M12 3.2c-4.8 0-8.8 3.9-8.8 8.8 0 4.8 3.9 8.8 8.8 8.8 4.8 0 8.8-3.9 8.8-8.8 0-4.8-4-8.8-8.8-8.8zm0 16c-4 0-7.2-3.3-7.2-7.2C4.8 8 8 4.8 12 4.8s7.2 3.3 7.2 7.2c0 4-3.2 7.2-7.2 7.2zM11 17h2v-6h-2v6zm0-8h2V7h-2v2z">
                        </path>
                    </svg>
                    <div  class="notice-banner-content">
                        {% trans 'Kupon kodunuz var? <span class="showcoupon">Buraya klikləyin və endirimdən faydalanın</span>' %} 
                    </div>
                </div>
                <div class="checkout_coupon form-coupon d-none mb-5">
                    <p>{% trans 'Əgər kupon kodunuz varsa buraya daxil edə bilərsiniz.' %}</p>
                    <div class="d-flex flex-column flex-md-row align-items-center justify-content-between">
                        <p class="form-row2 form-row2-first">
                            <input type="text" name="coupon_code" class="input-text" placeholder="Coupon code" id="coupon_code" value="">
                            </p>
                            <p class="form-row2 form-row2-last">
                            <button onclick="applyCoupon()" type="submit" class="button-apply" name="apply_coupon" value="Apply coupon">{% trans 'Tətbiq et' %}</button>
                            </p>
                    </div>
                 
                </div>
            </div>
            

            <div class="checkout-form w-100">
                <div class="row w-100">
                    <div class="col-lg-9">
                        <div class="w-100" id="customer_details">
                            {% if default_address %}
                            <div id="default_address">
                                <div class="address_cart card">
                                    <div class="card-body">
                                        <h5 class="card-title"><i class="fas fa-solid fa-location-dot"></i> {{default_address.address_line}}</h5>
                                        <h6 class="card-subtitle mb-3 ml-3 mt-2 text-muted">{{default_address.first_name}} {{default_address.last_name}}, {{default_address.region}}, {{default_address.street}}, {{default_address.building}}, {{default_address.flat}}</h6>
                                        <button type="button" data-toggle="modal" data-target="#addressListModal" class="mt-3 button">Başqa ünvan</button>
                                    </div>
                                </div>
                            </div>
                            <div id="new_address_inputs" class="row">
                            </div>
    
                            {% else %}
                            <div id="default_address">
                            </div>
                            <div id="new_address_inputs" class="row">
                                <div class="billing-fields">
                                    <h3>{% trans 'Ünvan Məlumatları' %}</h3>
                                    <input type="text" hidden id="new_address">
                                    <div class="row mb-4 mt-4">
                                        <div class="col-md-6 d-flex flex-column">
                                            <label class="">{% trans 'Ad' %}
                                                &nbsp;<abbr class="required" title="required">*</abbr></label><input
                                                id="addressfirstname" type="text" class="input-text " placeholder="" value="">
                                        </div>
                                        <div class="col-md-6 d-flex flex-column">
                                            <label>{% trans 'Soyad' %}
                                                &nbsp;<abbr class="required" title="required">*</abbr></label><input
                                                id="addresslastname" type="text" class="input-text " placeholder="" value="">
                                        </div>
                                    </div>
                                    <div class="row mb-4">
                                        <div class="col-md-12">
                                            <label class="">{% trans 'Ünvan başlığı' %}
                                                &nbsp;<abbr class="required" title="required">*</abbr></label><input type="text" class="input-text "
                                                id="addressline" placeholder="" value="">
                                        </div>
                                    </div>
                                    <div class="row mb-4">
                                        <div class="col-md-12 d-flex flex-column">
                                            <label>{% trans 'Ünvan' %}
                                                &nbsp;<abbr class="required" title="required">*</abbr></label><input
                                                id="addressregion" type="text" class="input-text " placeholder="{% trans 'Rayon' %}"
                                                value="">
                                        </div>
                                        <div class="col-md-12 mt-4 d-flex flex-column">
                                            <input type="text" class="input-text "
                                            id="addressstreet" placeholder="{% trans 'Küçə/Məhəllə' %}" value="">
                                        </div>
                                    </div>
                                    <div class="row mb-4">
                                        <div class="col-md-6 d-flex flex-column">
                                            <label class="">{% trans 'Bina/Ev' %}&nbsp;<abbr class="required" title="required">*</abbr></label><input
                                            id="addressbuilding" type="text" class="input-text " placeholder="" value="">
                                        </div>
                                        <div class="col-md-6 d-flex flex-column">
                                            <label>{% trans 'Mənzil' %}&nbsp;<abbr class="required" title="required">*</abbr></label><input
                                            id="addressflat" type="text" class="input-text " placeholder="" value="">
                                        </div>
                                    </div>
                                </div>
    
                                <button type="button" data-toggle="modal" data-target="#addressListModal" class="mt-3 mb-5 ml-2 button">{% trans 'Ünvanlarım' %}</button>
    
                            </div>
                            {% endif %}
                            <!-- addres secme modali -->
                            <div  class="modal fade" id="addressListModal" tabindex="-1" aria-labelledby="addressListModalLabel" aria-hidden="true">
                                <div class="modal-dialog modal-dialog-scrollable">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <h5 class="modal-title" id="addressListModalLabel">{% trans 'Ünvanlarım' %}</h5>
                                        </div>
                                        <div id="addresseslist" class="modal-body">
                                            {% if not default_address and not all_addresses%}
                                            <div class="border border-gray-500 bg-gray-200 p-3 text-center font-size-sm">{% trans 'Qeyd olunmuş ünvanınız yoxdur' %}</div>
                                            {% elif default_address %}
                                                <div data-addressid="{{default_address.id}}" class="address_cart_small mb-2 card">
                                                    <div class="card-body">
                                                        <h5 class="card-title"><i class="fas fa-solid fa-location-dot"></i> {{default_address.address_line}}</h5>
                                                        <h6 class="card-subtitle mb-3 ml-3 mt-2 text-muted">{{default_address.first_name}} {{default_address.last_name}}, {{default_address.region}}, {{default_address.street}}, {{default_address.building}}, {{default_address.flat}}</h6>
                                                    </div>
                                                </div>
                                            {% endif %}
                                            {% for address in all_addresses %}
                                                <div data-addressid="{{address.id}}" class="address_cart_small  mb-2 card">
                                                    <div class="card-body">
                                                        <h5 class="card-title"><i class="fas fa-solid fa-location-dot"></i> {{address.address_line}}</h5>
                                                        <h6 class="card-subtitle mb-3 ml-3 mt-2 text-muted">{{address.first_name}} {{address.last_name}}, {{address.region}}, {{address.street}}, {{address.building}}, {{address.flat}}</h6>
                                                    </div>
                                                </div>
                                            {% endfor %}
    
                                        </div>
                                        <div class="modal-footer">
                                            <button type="button" onclick="addNewAddress()" class="button">{% trans 'Yeni ünvan' %}</button>
                                            <button type="button" data-dismiss="modal" id="addressSelectClose" class="button">{% trans 'Bağla' %}</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-3 mt-3 mt-md-0">
                        <div class="order-checkout">
                            <h5 id="order_review_heading">{% trans 'Sifarişiniz' %}</h5>
                        </div>
                        <div id="order_review" class="checkout-review-order">
                            <table class="shop_table checkout-review-order-table">
                                <thead>
                                    <tr>
                                        <th class="product-name">{% trans 'Məhsul' %}</th>
                                        <th class="product-total">{% trans 'Ümumi' %}</th>
                                    </tr>
                                </thead>
                                <tbody id="productsStartLine">
                                    
                                </tbody>
                                <tfoot>

                              

                                    <tr class="order-total">
                                        <th>{% trans 'Cəmi' %}</th>
                                        <td>
                                            <del id="checkout-total"></del>
                                            <br>
                                            <strong>
                                                <span class="woocs_special_price_code">
                                                    <span class="Price-amount amount">
                                                        <bdi id="checkout-actual_total"></bdi>
                                                    </span>
                                                </span>
                                            </strong>
                                        </td>
                                    </tr>


                                </tfoot>
                            </table>

                            <div id="payment" class="checkout-payment">
                                <!-- <ul class="payment_methods methods">
                                    <li>
                                        <div class="notice-banner is-info" role="alert">
                                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24"
                                                height="24" aria-hidden="true" focusable="false">
                                                <path
                                                    d="M12 3.2c-4.8 0-8.8 3.9-8.8 8.8 0 4.8 3.9 8.8 8.8 8.8 4.8 0 8.8-3.9 8.8-8.8 0-4.8-4-8.8-8.8-8.8zm0 16c-4 0-7.2-3.3-7.2-7.2C4.8 8 8 4.8 12 4.8s7.2 3.3 7.2 7.2c0 4-3.2 7.2-7.2 7.2zM11 17h2v-6h-2v6zm0-8h2V7h-2v2z">
                                                </path>
                                            </svg>
                                            <div class="notice-banner__content">
                                                Sorry, it seems that there are no available payment methods. Please
                                                contact
                                                us if you require assistance or wish to make alternate arrangements.
                                            </div>
                                        </div>
                                    </li>
                                </ul> -->
                                <div class="form-row place-order">
                                    <!-- <noscript>
                                        Since your browser does not support JavaScript, or it is disabled, please ensure
                                        you
                                        click the <em>Update Totals</em> button before placing your order. You may be
                                        charged more than the amount stated above if you fail to do so. <br /><button
                                            type="submit" class="button alt" name="checkout_update_totals"
                                            value="Update totals">Update totals</button>
                                    </noscript> -->

                                    <div class="terms-and-conditions-wrapper">
                                        <div class="privacy-policy-text">
                                            <p>{% trans 'Sifarişinizi təsdiqləmədən öncə <a href="/about/" class="privacy-policy-link" target="_blank">haqqımızda</a> mətnin oxuyub, şərtlər və iş saatlarıhaqqında tanış olmağınız lazımdır.' %}</p>
                                        </div>
                                    </div>


                                    <button onclick="placeOrder()" type="button" class="button alt" name="woocommerce_checkout_place_order"
                                        id="place_order" value="Place order" data-value="Place order">{% trans 'Sifariş ver' %}</button>

                                    <input type="hidden" id="process-checkout-nonce" name="process-checkout-nonce"
                                        value="47ccd5781e"><input type="hidden" name="_wp_http_referer"
                                        value="/posterlaab-3/?wc-ajax=update_order_review">
                                </div>
                            </div>

                        </div>
                    </div>
                </div>


            </div>

           
        </div>
    </div>
    
    {% endblock %}

    {% block js %}
    <script>
        var transAddressDetail ='{% trans "Ünvan Məlumatları" %}'
        var transName = '{% trans "Ad" %}';
        var transSurname = '{% trans "Soyad" %}';
        var transAddressHead = '{% trans "Ünvan başlığı" %}';
        var transAddres = '{% trans "Ünvan" %}';
        var transRegion = '{% trans "Rayon" %}';
        var transStreet = '{% trans "Küçə/Məhəllə" %}';
        var transBuild = '{% trans "Bina/Ev" %}';
        var transFlat = '{% trans "Mənzil" %}';
        var transAnotherAddress = '{% trans "Başqa ünvan" %}';
        var transAddresses = '{% trans "Ünvanlarım" %}';
        var transSize = '{% trans "Ölçü" %}';
        var transMaterial = '{% trans "Material" %}';
        var transFrame = '{% trans "Çərçivə" %}';
        var transCoupon = '{% trans "Kupon" %}';
        var transDiscount = '{% trans "endirim" %}';
        var transFree = '{% trans "pulsuz" %}';
        var transDelivery = '{% trans "Çatdırılma" %}';
        





        var payDeclineURL = '{% url "order:pay_declined" %}?valid=true';
    </script>
    <script src="{% static 'js/checkout.js' %}"></script>
    {% endblock %}
